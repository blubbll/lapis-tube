
var this$0=this,$=window.$,NProgress=window.NProgress,debounce=window.debounce,fetch=window.fetch,getL=window.getL,getSize=window.getSize,loadImage=window.loadImage;function detectIEEdge(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var o=e.indexOf("rv:");return parseInt(e.substring(o+3,e.indexOf(".",o)),10)}var n=e.indexOf("Edge/");return n>0&&parseInt(e.substring(n+5,e.indexOf(".",n)),10)}if(getSize=function(){var e,t,o,n,i,r="undefined"!=typeof Symbol&&Symbol&&Symbol.iterator||"@@iterator",a="undefined"!=typeof Symbol&&Symbol&&Symbol.__setObjectSetter__;for(t=(o=0===(e=function(e){if(e){if(Array.isArray(e))return 0;var t;if(a&&a(e),"object"==typeof e&&"function"==typeof(t=e[r]))return a&&a(void 0),t.call(e);if(a&&a(void 0),e+""=="[object Generator]")return e}throw new Error(e+" is not iterable")}(n=$("size-indicators").find("size-indicator"))))?n.length:void 0;o?e<t:!(t=e.next()).done;)if(i=o?n[e++]:t.value,"flex"===getComputedStyle(i).display)return i.classList[0].split("-")[1].replace("flex","xs");e=t=o=n=void 0},loadImage=function(e){return new Promise((function(t){var o=new Image;o.onload=function(){return t(o)},o.src=e}))},detectIEEdge()){var LLegacy=((navigator.language||navigator.userLanguage).indexOf("-")?(navigator.language||navigator.userLanguage).split("-")[0]:navigator.language||navigator.userLanguage).toLowerCase()||"en",host=void 0;host=-1===location.host.indexOf("glitch.me")?location.protocol+"//"+LLegacy+"."+location.hostname:location.protocol+"//"+location.hostname,location.replace(host+"/outdated-browser.html")}debounce=function(e,t,o){var n;return function(){var i=this$0,r=i.arguments,a=o&&!n;clearTimeout(n),n=setTimeout((function(){n=null,o||e.apply(i,r)}),t),a&&e.apply(i,r)}},getL=function(){var e=navigator.language||navigator.userLanguage;return e.includes("-")&&(e=e.split("-")[0]),e.toLowerCase()||"en"},NProgress.configure({showSpinner:!1});var ofetch=window.fetch;fetch=function(e,t){return(void 0===t||t.silent||$("#nprogress")[0])&&NProgress.start(),ofetch(e,t).then((function(e){return(void 0===t||t.silent||$("#nprogress")[0])&&NProgress.done(),e}))};this$0=this,$=window.$;var autocomplete=window.autocomplete,alert=window.alert,done=(debounce=window.debounce,window.done),HOST=(fetch=window.fetch,getL=window.getL,getSize=window.getSize,window.HOST),REGION=window.REGION,load=window.load,moment=window.moment,T=window.T,playVid=window.playVid,openPlayer=window.openPlayer,closePlayer=window.closePlayer;playVid=function(e){openPlayer(),fetch(HOST+"/api/"+REGION+"/video/"+e).then((function(e){return e.text()})).then((function(e){var t=JSON.parse(e);console.log(t)}))},closePlayer=function(){$("#player").remove(),$("#filters")[0].style.setProperty("display",""),$("#results")[0].style.setProperty("display","")},openPlayer=function(){$("#view-inner").append(T.PLAYER),$("#filters")[0].style.setProperty("display","none","important"),$("#results")[0].style.setProperty("display","none","important")},$(document).on("click",".card[data-video]",(function(){playVid($(this$0).data("video"))}));$=window.$,autocomplete=window.autocomplete,alert=window.alert,debounce=window.debounce,done=window.done,fetch=window.fetch,getL=window.getL,getSize=window.getSize,HOST=window.HOST,REGION=window.REGION,load=window.load;var lazyload=window.lazyload,setupSearch=(moment=window.moment,T=window.T,window.setupSearch),SEARCH=window.SEARCH;setupSearch=function(){SEARCH=function(e){var t=document.getElementById("results"),o=t?+t.getAttribute("page"):1;1===o&&$("#view-inner").html(T.RESULTS),!t&&(t=document.getElementById("results")),t.setAttribute("page",o+1),$(t).on("scroll",(function(e){var o=t;if(console.log(o.scrollTop+o.clientHeight),console.log(o.scrollHeight),console.log(o.clientHeight/10),o.scrollTop+o.clientHeight>=o.scrollHeight){var n=o.getAttribute("q");console.log("Loading page "+o.getAttribute("page")+" for query "+n+"..."),SEARCH(n)}})),$("param").html('<i class="fas fa-sync fa-spin"></i>'),t.getAttribute("q")===e?t.getAttribute("page",o+1):t.setAttribute("page",1),t.setAttribute("q",e),console.log(t.getAttribute("q")),fetch(HOST+"/api/"+REGION+"/search/"+e+"?page="+o).then((function(e){return e.text()})).then((function(e){var t,o,n,i="undefined"!=typeof Symbol&&Symbol&&Symbol.iterator||"@@iterator",r="undefined"!=typeof Symbol&&Symbol&&Symbol.__setObjectSetter__;function a(e){if(e){if(Array.isArray(e))return 0;var t;if(r&&r(e),"object"==typeof e&&"function"==typeof(t=e[i]))return r&&r(void 0),t.call(e);if(r&&r(void 0),e+""=="[object Generator]")return e}throw new Error(e+" is not iterable")}var l=JSON.parse(e);for(o=(n=0===(t=a(l)))?l.length:void 0;n?t<o:!(o=t.next()).done;){var s,c,d,u;(function(e){var t,o="";for(u=e.videoThumbnails,s=a(u),c=(d=0===s)?u.length:void 0;d?s<c:!(c=s.next()).done;)t=d?u[s++]:c.value,0!==Object.keys(e.videoThumbnails).indexOf(t)&&(o+=t.url+"\t"+t.width+"w,\n");s=c=d=u=void 0;var n,i=T.RESULT.replace("{{title}}",e.title).replace("{{preview-set}}",o.slice(0,-1)).replace("{{preview-desc}}",e.description).replace("{{duration}}",moment.duration(1e3*e.lengthSeconds).humanize()).replace("{{duration-detailed}}",(n=moment.utc(moment.duration(e.lengthSeconds,"seconds").asMilliseconds()).format("HH:mm:ss"),n.startsWith("00:")&&(n=n.slice(3)),n.startsWith("0")&&(n=n.slice(1)),n)).replace("{{video}}",e.videoId).replace("{{author}}",e.author).replace("{{authorid}}",e.authorId).replace("{{views}}",e.viewCount);$("#results-inner").append(i),lazyload(document.querySelectorAll("figure>img"))})(n?l[t++]:o.value)}if(t=o=n=void 0,0===$("#results").height()){console.warn("your browser doesn't like flexboxes too much :(");var h=setInterval((function(){0!==$("#view-inner").height()&&(console.log("fixed the results flexbox..."),$("#results")[0].style.position="absolute",$("#results")[0].style.width="100%",$("#results")[0].style.setProperty("margin-top",$("#filters")[0].clientHeight+"px","important"),$("#results")[0].style.height="calc(100% - "+($("#filters")[0].clientHeight+$("#top")[0].clientHeight+$("#footer")[0].clientHeight)+"px)",clearInterval(h))}),0)}}))};var e=document.getElementById("search-input");getL(),autocomplete({input:e,showOnFocus:!0,minLength:1,className:"live-search backdrop-blur",debounceWaitMs:299,fetch:function(e,t){var o=e.toLowerCase();o&&fetch(HOST+"/api/"+REGION+"/complete/"+o).then((function(e){return e.text()})).then((function(o){var n=JSON.parse(o);if(200===n.code){var i=[e.toLowerCase!==n.data[0]?{label:e,value:e.toLowerCase()}:""];n.data.filter((function(e){return e.length})).forEach((function(e){i.push({label:e,value:e})})),t(i)}else 404===n.code&&t([{label:"‚ùåNo results",value:"‚ùåNo results"}])}))},onSelect:function(t){"‚ùåNo results"!==t.label&&(e.value=t.label,SEARCH(t.label))}});$("#search-input").on("focus",(function(){"xs"===getSize()&&($("#search")[0].style.setProperty("margin-left",0,"important"),$("#dynamic-logo")[0].style.setProperty("display","none","important"),$("#search").addClass("col-11"),$("#search-btn").addClass("d-none"),$("#search-input").addClass("rounded"))})),$("#search-input").on("blur",(function(){"xs"===getSize()&&($("#search")[0].style.setProperty("margin-left",""),$("#dynamic-logo")[0].style.setProperty("display",""),$("#search").removeClass("col-11"),$("#search-btn").removeClass("d-none"),$("#search-input").removeClass("rounded"))}))};debounce=window.debounce;var initBg=window.initBg,define=window.define,SimplexNoise=window.SimplexNoise;!function(){"use strict";var e=.5*(Math.sqrt(3)-1),t=(3-Math.sqrt(3))/6,o=1/6,n=(Math.sqrt(5)-1)/4,i=(5-Math.sqrt(5))/20;function r(e){e||(e=Math.random),this.p=a(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var t=0;t<512;t++)this.perm[t]=this.p[255&t],this.permMod12[t]=this.perm[t]%12}function a(e){var t,o=new Uint8Array(256);for(t=0;t<256;t++)o[t]=t;for(t=0;t<255;t++){var n=t+~~(e()*(256-t)),i=o[t];o[t]=o[n],o[n]=i}return o}r.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(o,n){var i,r,a=this.permMod12,l=this.perm,s=this.grad3,c=0,d=0,u=0,h=(o+n)*e,f=Math.floor(o+h),w=Math.floor(n+h),p=(f+w)*t,g=o-(f-p),m=n-(w-p);g>m?(i=1,r=0):(i=0,r=1);var v=g-i+t,y=m-r+t,b=g-1+2*t,S=m-1+2*t,$=255&f,O=255&w,E=.5-g*g-m*m;if(E>=0){var x=3*a[$+l[O]];c=(E*=E)*E*(s[x]*g+s[x+1]*m)}var L=.5-v*v-y*y;if(L>=0){var T=3*a[$+i+l[O+r]];d=(L*=L)*L*(s[T]*v+s[T+1]*y)}var A=.5-b*b-S*S;if(A>=0){var H=3*a[$+1+l[O+1]];u=(A*=A)*A*(s[H]*b+s[H+1]*S)}return 70*(c+d+u)},noise3D:function(e,t,n){var i,r,a,l,s,c,d,u,h,f,w=this.permMod12,p=this.perm,g=this.grad3,m=(e+t+n)*(1/3),v=Math.floor(e+m),y=Math.floor(t+m),b=Math.floor(n+m),S=(v+y+b)*o,$=e-(v-S),O=t-(y-S),E=n-(b-S);$>=O?O>=E?(s=1,c=0,d=0,u=1,h=1,f=0):$>=E?(s=1,c=0,d=0,u=1,h=0,f=1):(s=0,c=0,d=1,u=1,h=0,f=1):O<E?(s=0,c=0,d=1,u=0,h=1,f=1):$<E?(s=0,c=1,d=0,u=0,h=1,f=1):(s=0,c=1,d=0,u=1,h=1,f=0);var x=$-s+o,L=O-c+o,T=E-d+o,A=$-u+2*o,H=O-h+2*o,I=E-f+2*o,M=$-1+.5,P=O-1+.5,N=E-1+.5,R=255&v,C=255&y,z=255&b,G=.6-$*$-O*O-E*E;if(G<0)i=0;else{var q=3*w[R+p[C+p[z]]];i=(G*=G)*G*(g[q]*$+g[q+1]*O+g[q+2]*E)}var k=.6-x*x-L*L-T*T;if(k<0)r=0;else{var _=3*w[R+s+p[C+c+p[z+d]]];r=(k*=k)*k*(g[_]*x+g[_+1]*L+g[_+2]*T)}var B=.6-A*A-H*H-I*I;if(B<0)a=0;else{var j=3*w[R+u+p[C+h+p[z+f]]];a=(B*=B)*B*(g[j]*A+g[j+1]*H+g[j+2]*I)}var W=.6-M*M-P*P-N*N;if(W<0)l=0;else{var D=3*w[R+1+p[C+1+p[z+1]]];l=(W*=W)*W*(g[D]*M+g[D+1]*P+g[D+2]*N)}return 32*(i+r+a+l)},noise4D:function(e,t,o,r){this.permMod12;var a,l,s,c,d,u,h,f,w,p,g,m,v,y,b,S,$,O=this.perm,E=this.grad4,x=(e+t+o+r)*n,L=Math.floor(e+x),T=Math.floor(t+x),A=Math.floor(o+x),H=Math.floor(r+x),I=(L+T+A+H)*i,M=e-(L-I),P=t-(T-I),N=o-(A-I),R=r-(H-I),C=0,z=0,G=0,q=0;M>P?C++:z++,M>N?C++:G++,M>R?C++:q++,P>N?z++:G++,P>R?z++:q++,N>R?G++:q++;var k=M-(u=C>=3?1:0)+i,_=P-(h=z>=3?1:0)+i,B=N-(f=G>=3?1:0)+i,j=R-(w=q>=3?1:0)+i,W=M-(p=C>=2?1:0)+2*i,D=P-(g=z>=2?1:0)+2*i,U=N-(m=G>=2?1:0)+2*i,J=R-(v=q>=2?1:0)+2*i,Y=M-(y=C>=1?1:0)+3*i,F=P-(b=z>=1?1:0)+3*i,V=N-(S=G>=1?1:0)+3*i,Z=R-($=q>=1?1:0)+3*i,K=M-1+4*i,Q=P-1+4*i,X=N-1+4*i,ee=R-1+4*i,te=255&L,oe=255&T,ne=255&A,ie=255&H,re=.6-M*M-P*P-N*N-R*R;if(re<0)a=0;else{var ae=O[te+O[oe+O[ne+O[ie]]]]%32*4;a=(re*=re)*re*(E[ae]*M+E[ae+1]*P+E[ae+2]*N+E[ae+3]*R)}var le=.6-k*k-_*_-B*B-j*j;if(le<0)l=0;else{var se=O[te+u+O[oe+h+O[ne+f+O[ie+w]]]]%32*4;l=(le*=le)*le*(E[se]*k+E[se+1]*_+E[se+2]*B+E[se+3]*j)}var ce=.6-W*W-D*D-U*U-J*J;if(ce<0)s=0;else{var de=O[te+p+O[oe+g+O[ne+m+O[ie+v]]]]%32*4;s=(ce*=ce)*ce*(E[de]*W+E[de+1]*D+E[de+2]*U+E[de+3]*J)}var ue=.6-Y*Y-F*F-V*V-Z*Z;if(ue<0)c=0;else{var he=O[te+y+O[oe+b+O[ne+S+O[ie+$]]]]%32*4;c=(ue*=ue)*ue*(E[he]*Y+E[he+1]*F+E[he+2]*V+E[he+3]*Z)}var fe=.6-K*K-Q*Q-X*X-ee*ee;if(fe<0)d=0;else{var we=O[te+1+O[oe+1+O[ne+1+O[ie+1]]]]%32*4;d=(fe*=fe)*fe*(E[we]*K+E[we+1]*Q+E[we+2]*X+E[we+3]*ee)}return 27*(a+l+s+c+d)}},r._buildPermutationTable=a,void 0!==define&&define.amd&&define((function(){return r})),"undefined"!=typeof exports?exports.SimplexNoise=r:"undefined"!=typeof window&&(window.SimplexNoise=r),"undefined"!=typeof module&&(module.exports=r)}(),initBg=function(){var e,t,o,n,i,r,a={},l=function(){"use strict";(e={}).__proto__={a:o={}},e.a;var e,o,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,l={};function s(e,t,o){this.x=e,this.y=t,this.R=o}return n(s,"prototype",{configurable:!1,enumerable:!1,writable:!1}),l.draw=function(){t.save();var e="rgb(10, 10, "+Math.round(42*(r.noise2D(this.x/a.noiseZoom,this.y/a.noiseZoom)+1))+")";t.fillStyle=e,t.strokeStyle=e,t.translate(this.x,this.y),t.beginPath();for(var o=0;o<6;o++){var n=Math.PI/3*o+Math.PI/6,i=Math.cos(n)*this.R,l=Math.sin(n)*this.R;t.lineTo(i,l)}t.closePath(),t.stroke(),t.fill(),t.restore()},function(e,t){for(var o in t)t.hasOwnProperty(o)&&n(e,o,i(t,o))}(s.prototype,l),l=void 0,s}();function s(){o=e.width=window.innerWidth,n=e.height=window.innerHeight,t.lineCap="round",t.lineJoin="round",c()}function c(){r=new SimplexNoise,t.lineWidth=1,a.noiseZoom=400*Math.random()+200,a.size=15*Math.random()+6,function(){i=[];for(var e=a.size,t=e/Math.cos(Math.PI/6),r=2*e/Math.sqrt(3),s=o/(2*e)+1,c=n/t,d=0;d<s;d++)for(var u=0;u<c;u++){var h=new l(e*d*2+(u%2==0?e:0),(r/2+t)*u,t);i.push(h)}}(),t.fillStyle="black",t.fillRect(0,0,o,n),i.forEach((function(e){e.draw()}))}e=document.querySelector("#canvas"),t=e.getContext("2d"),window.addEventListener("resize",debounce(s,999)),e.addEventListener("click",c),s()},window.load=function(){return setTimeout((function(){document.querySelector("diamond").setAttribute("style",""),document.querySelector("#wrap")&&document.querySelector("#wrap").setAttribute("style","display:none;"),initBg()}),999)},window.done=function(){return setTimeout((function(){document.querySelector("diamond").setAttribute("style","display:none;"),document.querySelector("#wrap")&&document.querySelector("#wrap").setAttribute("style","")}),999)},location.hash="",console.log("%c Welcome to lapisTube üôÉ","background: blue;");$=window.$,autocomplete=window.autocomplete,alert=window.alert,debounce=window.debounce,done=window.done,fetch=window.fetch,getL=window.getL,getSize=window.getSize,initBg=window.initBg,load=window.load,lazyload=window.lazyload,moment=window.moment,SEARCH=window.SEARCH,setupSearch=window.setupSearch,T=window.T;var API=window.API,GEO=window.GEO,lscache=(HOST=window.HOST,REGION=window.REGION,window.lscache);"gtranslate.io"!==!location.host&&!location.host.endsWith("glitch.me")&&window.self===window.top&&3===location.hostname.split(".").length&&(location.hostname.split(".")[0],getL()[location.replace(location.protocol+"//"+location.hostname.split(".").splice(1).join("."))]),window.onresize=function(){$("body").attr("size",getSize())},HOST=location.protocol+"//"+(location.host.endsWith("glitch.me")?location.hostname:"gtranslate.io"===location.hostname?location.href.split("/edit/")[1]:getL()+"."+location.hostname),API="//"+location.hostname+"/api",$(document).on("click","#toggle-left",(function(){var e=$("#left");e.attr("expanded","false"===e.attr("expanded")?"true":"false"),setTimeout((function(){"false"===e.attr("expanded")?e.addClass("d-none"):e.removeClass("d-none")}),199)})),window.onload=function(){var e=HOST+"/html";if(lscache.get("cookie-accepted")){var t=window.T={};Promise.all([e+"/app.html",API+"/geoip",e+"/channel.html",e+"/player.html",e+"/result-item.html",e+"/result-list.html"].map((function(e){return fetch(e).then((function(e){return e.text()}))}))).then((function(e){t.HOME=e[0],GEO=JSON.parse(e[1]),REGION=GEO.country_code.toLowerCase(),console.debug("Your Geo Information by Maxmind: ",GEO),console.debug("Your browser language: ",getL()),t.CHANNEL=e[2],t.PLAYER=e[3],t.RESULT=e[4],t.RESULTS=e[5],setupClient(),done()})).catch((function(e){console.warn(e),alert("WEBSITE FAILED LOADING. PRESS OK TO TRY AGAIN!"),setTimeout((function(){location.reload(!0)}))}))}else fetch(e+"/cookie.html").then((function(e){return e.text()})).then((function(e){$("gtranslate")[0].outerHTML=e,done()}))};var demo=function(){var e="New americana";$("#top")[0].value=e,SEARCH(e)};window.onhashchange=function(){var e=HOST+"/html";switch(location.hash){case"#cookie-what?":case"#what?":fetch(e+"/what.html").then((function(e){return e.text()})).then((function(e){$("[pop]")[0].outerHTML=e,done()}))}switch(location.hash){case"#cookie":fetch(e+"/cookie.html").then((function(e){return e.text()})).then((function(e){$("[pop]")[0].outerHTML=e,done()}))}},$(document).on("click","#usage-accept",(function(){lscache.set("cookie-accepted",!0,44640),location.reload(!0)}));var setupClient=function(){$("gtranslate")[0].outerHTML=T.HOME,initBg(),moment.locale(getL()),setupSearch(),$("#yt-lang").text(getL()),$("#dynamic-logo .alpha-target")[0].src="https://raw.githubusercontent.com/legacy-icons/famfamfam-flags/master/dist/png/"+GEO.country_code.toLowerCase()+".png",$("#dynamic-logo")[0].setAttribute("title","Region: "+GEO.country),$("#yt-lang")[0].setAttribute("title","App language: "+getL()),demo()};